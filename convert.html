<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>تحويل الصورة إلى PDF</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
font-family: Tahoma;
background:#f5f5f5;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}
.box {
background:white;
padding:30px;
border-radius:10px;
box-shadow:0 5px 15px rgba(0,0,0,.1);
text-align:center;
}
</style>
</head>

<body>

<div class="box">
<h2>جاري تحويل الفاتورة إلى PDF...</h2>
<p>سيتم التحميل تلقائيًا</p>
</div>

<script>
const { jsPDF } = window.jspdf;

const params = new URLSearchParams(window.location.search);
const imgUrl = params.get("img");

if (!imgUrl) {
alert("رابط الصورة غير موجود");
throw new Error("No image URL");
}

const img = new Image();
img.crossOrigin = "anonymous";
img.src = imgUrl;

img.onload = () => {
const pdf = new jsPDF("p", "mm", "a4");

const pageWidth = pdf.internal.pageSize.getWidth();
const pageHeight = (img.height * pageWidth) / img.width;

pdf.addImage(img, "PNG", 0, 0, pageWidth, pageHeight);
pdf.save("فاتورة.pdf");
};

img.onerror = () => {
alert("فشل تحميل الصورة");
};
</script>

</body>
</html>
